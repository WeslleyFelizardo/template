<div class="w-full max-w-3xl">


        <!-- Section -->
        <div class="w-full">
            <div class="text-xl">Subscrição</div>
            <div class="text-secondary">Adicione abaixo a sua aplicação para obter as credenciais de acesso as nossas API's</div>
        </div>
        <div class="my-10 border-t"></div>

        <div class="w-full pb-8">
        <mat-form-field
            class="w-full"
            [subscriptSizing]="'dynamic'"
            id="appName"
            matInput
            >
            <mat-label>Nome da aplicação</mat-label>
            <mat-icon
                class="icon-size-5"
                [svgIcon]="'heroicons_solid:user'"
                matPrefix></mat-icon>
            <input [(ngModel)]="appName"
                matInput
                [placeholder]="'Ex: Power BI, Billing...'">
            <button
                (click)="addApp()"
                mat-icon-button
                matSuffix>
                <mat-icon
                    class="icon-size-5"
                    [svgIcon]="'heroicons_solid:plus-circle'"></mat-icon>
            </button>

        </mat-form-field>
    </div>

    <fuse-alert *ngIf="cadastroSucesso"
    [type]="'success'"
    [appearance]="'border'">
    <span fuseAlertTitle>Aplicação registrada com sucesso</span>
    Suas credenciais foram geradas, agora você já pode consumir nossas API's
    </fuse-alert>

        <!-- Divider -->
        <div class="my-10 border-t"></div>

        
        <!-- Section -->
        <div class="w-full pb-8">
            <div class="text-xl">Minhas chaves</div>
            <div class="text-secondary">Armazene com cuidado suas credenciais de acesso</div>
        </div>

        <fuse-alert *ngIf="userApiSubscriptionList && userApiSubscriptionList.length == 0"
        [type]="'warning'"
        [appearance]="'border'">
        <span fuseAlertTitle>Você ainda não tem credenciais registradas</span>
        Inicie o cadastro das suas credenciais para acessar nossas API's
        </fuse-alert>

        <fuse-alert *ngIf="errorSubscriptionList.display"
        [type]="'error'"
        [appearance]="'border'">
        <span fuseAlertTitle>Ops, problemas encontrado...</span>
        {{errorSubscriptionList.message}}
        </fuse-alert>

        <div *ngIf="userApiSubscriptionList">
            <div *ngFor="let item of userApiSubscriptionList;  let i = index" class="w-full mt-8">
                <mat-accordion >
                    <mat-expansion-panel class="mat-elevation-z0 pt-1 m-0" [expanded]="false">
                        <mat-expansion-panel-header [collapsedHeight]="'56px'">
                            <mat-panel-title>
                                <mat-icon
                    class="icon-size-5"
                    svgIcon="apps"
                    matPrefix></mat-icon>
                                <span style="padding-inline: 10px;">{{item.clientName}}</span>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <mat-panel-description class="pt-2">
                            
                        </mat-panel-description>
                        
                        <form name="form{{item.clientId}}">

                            <!-- Name field -->
                            <mat-form-field class="w-full">
                                <mat-label>Cliend Id</mat-label>
                                <input class="form-control"
                                    id="fieldclientId-{{i}}"
                                    matInput
                                    [value]="item.clientId">
                            
                            </mat-form-field>


                            <!-- Password field -->
                            <mat-form-field class="w-full">
                                <mat-label>ClientSecret</mat-label>
                                <input class="form-control"
                                    id="fieldClientSecret-{{i}}"
                                    matInput
                                    type="password"
                                    [value]="item.clientSecret"
                                    #clientSecretField>
                                <button
                                    mat-icon-button
                                    type="button"
                                    (click)="clientSecretField.type === 'password' ? clientSecretField.type = 'text' : clientSecretField.type = 'password'"
                                    matSuffix>
                                    <mat-icon
                                        class="icon-size-5"
                                        *ngIf="clientSecretField.type === 'password'"
                                        [svgIcon]="'heroicons_solid:eye'"></mat-icon>
                                    <mat-icon
                                        class="icon-size-5"
                                        *ngIf="clientSecretField.type === 'text'"
                                        [svgIcon]="'heroicons_solid:eye-off'"></mat-icon>
                                </button>
                                
                            </mat-form-field>

                            <!-- Password field -->
                            <mat-form-field class="w-full">
                                <mat-label>Subscription Key</mat-label>
                                <input class="form-control"
                                    id="fieldSubscriptionKey-{{i}}"
                                    matInput
                                    type="password"
                                    [value]="item.primaryKey"
                                    #subscriptionKeyField>
                                <button
                                    mat-icon-button
                                    type="button"
                                    (click)="subscriptionKeyField.type === 'password' ? subscriptionKeyField.type = 'text' : subscriptionKeyField.type = 'password'"
                                    matSuffix>
                                    <mat-icon
                                        class="icon-size-5"
                                        *ngIf="subscriptionKeyField.type === 'password'"
                                        [svgIcon]="'heroicons_solid:eye'"></mat-icon>
                                    <mat-icon
                                        class="icon-size-5"
                                        *ngIf="subscriptionKeyField.type === 'text'"
                                        [svgIcon]="'heroicons_solid:eye-off'"></mat-icon>
                                </button>
                                
                            </mat-form-field>

                        </form>
                    
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
        </div>
        <!-- Divider -->
        <div class="mt-11 mb-10 border-t"></div>


</div>
